var I=Object.defineProperty;var L=(u,a,r)=>a in u?I(u,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):u[a]=r;var N=(u,a,r)=>L(u,typeof a!="symbol"?a+"":a,r);import{_ as G}from"./DoOsWbsk.js";import{_ as z}from"./Bd2QKyF9.js";import{_ as Q}from"./CSysSGPk.js";import{k as H,l as J,c as W,G as K,ar as X,Q as j,$ as D,a2 as t,I as n,a6 as c,a9 as m,a3 as Y,u as s,ab as E,R as Z,a1 as M,A as C}from"./DSZiQSDz.js";import{o as ee,s as k,p as O,u as se,a as b,t as oe}from"./gL7-F3v6.js";import{B as te,k as $,d as F,c as ae,n as re,e as le,E as ne}from"./a3x-3kU3.js";import{A as ie}from"./ak-6Sr7X.js";import{M as q}from"./BzALxwod.js";import{G as me}from"./TWlqzfxS.js";class ue extends te{constructor(){super();N(this,"resource",{register:"/register"})}async registerUser(r,V="/carteira/deposito"){try{const p=$("marketingCampaignId").value,S=p?{...r,marketingCampaignId:p}:r,l=await this.$api(this.resource.register,{method:"POST",body:S,headers:{Device:"Mobile"}}),{token:f,expiresAt:g}=l.data.auth;return $("token",ie(g)).value=f,F().setUser(l.data.user),await ae().runWithContext(()=>re(V)),this.notify({text:l.message,type:"success"}),l}catch(p){throw console.error("Algo deu errado ao tentar realizar o cadastro do usuário",p),p}}}const de={class:"flex h-full w-full flex-col items-center justify-center bg-white px-4 pb-14 pt-6"},pe={class:"mb-4 flex w-full max-w-md items-center justify-start"},ce={class:"w-full max-w-md *:rounded-2xl"},fe={class:"flex w-full flex-col gap-6"},ge={key:1,class:"inline-flex items-center justify-center rounded-full bg-emerald-100 px-2.5 py-0.5 text-emerald-700"},xe={class:"text-[10px] font-light text-gray-scale-900"},ve={class:"flex w-full flex-col items-center justify-center text-base"},Be=H({__name:"Register",props:{page:{type:Boolean,required:!1,default:!0},redirectTo:{type:String,required:!1},showLogo:{type:Boolean,default:!0},showTitle:{type:Boolean,default:!0}},setup(u){const a=F(),r=ne(),V=u,p=ee({document:O(i=>String(i).replace(/\D/g,""),k({message:"Digite seu CPF"}).regex(/^\d{11}$/,{message:"O CPF esta em um formato invalido!"})),email:k({message:"Digite seu email"}).min(1,{message:"O email e um campo obrigatorio!"}).email({message:"O email deve ser valido!"}),phone:O(i=>String(i).replace(/\D/g,""),k({message:"Digite seu telefone"}).regex(/^\d{11}$/,{message:"O telefone esta em um formato invalido!"})),password:k({message:"Digite sua senha"}).min(8,{message:"A senha e um campo obrigatorio!"}),refCode:k().optional()}),{handleSubmit:S,errors:l}=se({validationSchema:oe(p)}),{value:f}=b("document"),{value:g}=b("email"),{value:T}=b("phone"),{value:A}=b("password"),{value:h}=b("refCode"),B=le().query.refCode,U=J(()=>B||h.value),_=W(!1),P=S(async i=>{_.value=!0,i=U.value?{...i,refCode:U.value}:i,await new ue().registerUser(i,V.redirectTo).then(e=>{var x,v,d,w,y,o,R;e.type==="success"&&(r==null||r.trackEvent({event:me.SIGNUP,action:"signup",category:"signup",label:"signup",value:{name:(d=(v=(x=a.user)==null?void 0:x.profile)==null?void 0:v.fullName)==null?void 0:d.split(" ").slice(0,2).join(" "),email:(w=a.user)==null?void 0:w.email,phone:(y=a.user)==null?void 0:y.phone,birthdate:(R=(o=a.user)==null?void 0:o.profile)==null?void 0:R.birthdate}}))}).finally(()=>{_.value=!1})});return(i,e)=>{const x=G,v=z,d=Q,w=K("AtomLink"),y=X("maska");return D(),j("div",de,[t("div",pe,[n(v,{to:"/"},{default:c(()=>[n(x,{class:"!px-0 !py-4 !text-blue",variant:"text",icon:"material-symbols:arrow-back-ios-new-rounded"},{default:c(()=>e[6]||(e[6]=[m(" Voltar ")])),_:1})]),_:1})]),t("div",ce,[t("div",fe,[e[16]||(e[16]=t("div",{class:"flex flex-col gap-2"},[t("h1",{class:"text-xl font-semibold leading-10 text-gray-900 md:text-3xl"},[m(" Cadastre-se agora no "),t("span",{class:"text-blue-500"},"Ponto do Bicho")]),t("span",{class:"text-gray-900"},"Crie sua conta em poucos passos:")],-1)),t("form",{onSubmit:e[5]||(e[5]=Y((...o)=>s(P)&&s(P)(...o),["prevent"])),class:"flex w-full flex-col gap-4"},[E(n(d,{name:"document","error-message":s(l).document,class:"w-full",modelValue:s(f),"onUpdate:modelValue":e[0]||(e[0]=o=>C(f)?f.value=o:null),placeholder:"Digite seu CPF"},null,8,["error-message","modelValue"]),[[y,s(q).DOCUMENT]]),n(d,{name:"email","error-message":s(l).email,class:"w-full",modelValue:s(g),"onUpdate:modelValue":e[1]||(e[1]=o=>C(g)?g.value=o:null),placeholder:"Email"},null,8,["error-message","modelValue"]),E(n(d,{name:"phone","error-message":s(l).phone,class:"w-full",modelValue:s(T),"onUpdate:modelValue":e[2]||(e[2]=o=>C(T)?T.value=o:null),placeholder:"Celular"},null,8,["error-message","modelValue"]),[[y,s(q).PHONE]]),n(d,{type:"password",name:"password","error-message":s(l).password,class:"w-full",modelValue:s(A),"onUpdate:modelValue":e[3]||(e[3]=o=>C(A)?A.value=o:null),placeholder:"Senha"},null,8,["error-message","modelValue"]),s(B)?M("",!0):(D(),Z(d,{key:0,type:"refCode",name:"refCode","error-message":s(l).refCode,class:"w-full",modelValue:s(h),"onUpdate:modelValue":e[4]||(e[4]=o=>C(h)?h.value=o:null),placeholder:"Código de indicação (opcional)"},null,8,["error-message","modelValue"])),s(U)?(D(),j("span",ge,e[7]||(e[7]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"-ms-1 me-1.5 size-4"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),t("p",{class:"whitespace-nowrap text-sm"},"Voce esta usando um codigo de indicacao",-1)]))):M("",!0),n(x,{loading:s(_),class:"mt-2","is-disabled":!!Object.keys(s(l)).length},{default:c(()=>e[8]||(e[8]=[m(" Registrar ")])),_:1},8,["loading","is-disabled"])],32),t("span",xe,[e[11]||(e[11]=m(" Ao se cadastrar, você confirma que tem mais de 18 anos e concorda com nossos ")),n(w,{to:"/termos-de-uso",class:"font-normal text-gray-900 underline"},{default:c(()=>e[9]||(e[9]=[m("Termos de Uso")])),_:1}),e[12]||(e[12]=m(" e ")),n(w,{to:"/politica-de-privacidade",class:"font-normal text-gray-900 underline"},{default:c(()=>e[10]||(e[10]=[m(" Política de Privacidade ")])),_:1}),e[13]||(e[13]=m(" . "))]),t("div",ve,[e[15]||(e[15]=t("span",{class:"text-gray-900"},"Já tem uma conta?",-1)),n(v,{to:"/entrar",class:"text-yellow underline"},{default:c(()=>e[14]||(e[14]=[m("Entre aqui")])),_:1})])])])])}}});export{Be as _};
