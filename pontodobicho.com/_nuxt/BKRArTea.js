var h=Object.defineProperty;var p=(t,o,e)=>o in t?h(t,o,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[o]=e;var i=(t,o,e)=>p(t,typeof o!="symbol"?o+"":o,e);import{B as d,k as n,d as u,n as c}from"./a3x-3kU3.js";import{u as y}from"./Cd6k-rI7.js";import{A as m}from"./ak-6Sr7X.js";class w extends d{constructor(){super();i(this,"resources",{login:"/auth/login",logout:"/auth/logout"})}async login(e,a="/"){try{const r=y(),s=await this.$api(this.resources.login,{method:"POST",body:e,headers:{Device:r.deviceType,OperatingSystem:r.operatingSystem,Browser:r.browser}}),{token:l,expiresAt:g}=s.data.auth;return n("token",m(g)).value=l,u().user=s.data.user,a&&c(a),this.notify({text:s.message,type:"success"}),s}catch(r){throw console.error("Algo deu errado ao tentar realizar o login",r),r}}async logout(){try{const e=await this.$api(this.resources.logout,{method:"DELETE"});return this.notify({text:e.message,type:"success"}),n("token").value=void 0,u().clearUser(),c("/entrar"),e}catch(e){throw console.error("Algo deu errado ao tentar realizar o logout",e),e}}}export{w as A};
