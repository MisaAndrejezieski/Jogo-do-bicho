import{c as V,a as P,l as R,d as _,v as A}from"./DSZiQSDz.js";/**
 * Vue Currency Input 3.2.1
 * (c) 2018-2025 Matthias Stiller
 * @license MIT
 */var y;(function(s){s.symbol="symbol",s.narrowSymbol="narrowSymbol",s.code="code",s.name="name",s.hidden="hidden"})(y||(y={}));var p;(function(s){s.precision="precision",s.thousands="thousands",s.tenThousands="tenThousands",s.millions="millions",s.billions="billions"})(p||(p={}));const D=s=>s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),N=s=>s.replace(/^0+(0$|[^0])/,"$1"),E=(s,i)=>(s.match(new RegExp(D(i),"g"))||[]).length,C=(s,i)=>s.substring(0,s.indexOf(i)),O=[",",".","٫","。"],M="(0|[1-9]\\d*)";class L{constructor(i){var e,t,n,d,a,m;const{currency:l,currencyDisplay:f,locale:r,precision:u,accountingSign:c,useGrouping:g}=i;this.locale=r,this.options={currency:l,useGrouping:g,style:"currency",currencySign:c?"accounting":void 0,currencyDisplay:f!==y.hidden?f:void 0};const h=new Intl.NumberFormat(r,this.options),F=h.formatToParts(123456);this.currency=(e=F.find(({type:o})=>o==="currency"))===null||e===void 0?void 0:e.value,this.digits=[0,1,2,3,4,5,6,7,8,9].map(o=>o.toLocaleString(r)),this.decimalSymbol=(t=F.find(({type:o})=>o==="decimal"))===null||t===void 0?void 0:t.value,this.groupingSymbol=(n=F.find(({type:o})=>o==="group"))===null||n===void 0?void 0:n.value,this.minusSign=(d=h.formatToParts(-1).find(({type:o})=>o==="minusSign"))===null||d===void 0?void 0:d.value,this.decimalSymbol===void 0?this.minimumFractionDigits=this.maximumFractionDigits=0:typeof u=="number"?this.minimumFractionDigits=this.maximumFractionDigits=u:(this.minimumFractionDigits=(a=u==null?void 0:u.min)!==null&&a!==void 0?a:h.resolvedOptions().minimumFractionDigits,this.maximumFractionDigits=(m=u==null?void 0:u.max)!==null&&m!==void 0?m:h.resolvedOptions().maximumFractionDigits);const S=o=>C(o,this.digits[1]),x=o=>o.substring(o.lastIndexOf(this.decimalSymbol?this.digits[0]:this.digits[1])+1);this.prefix=S(h.format(1)),this.suffix=x(h.format(1)),this.negativePrefix=S(h.format(-1)),this.negativeSuffix=x(h.format(-1))}parse(i){if(i){const e=this.isNegative(i);i=this.normalizeDigits(i),i=this.stripCurrency(i,e),i=this.stripSignLiterals(i);const t=this.decimalSymbol?`(?:${D(this.decimalSymbol)}(\\d*))?`:"",n=this.stripGroupingSeparator(i).match(new RegExp(`^${M}${t}$`));if(n&&this.isValidIntegerFormat(this.decimalSymbol?i.split(this.decimalSymbol)[0]:i,Number(n[1])))return+`${e?"-":""}${this.onlyDigits(n[1])}.${this.onlyDigits(n[2]||"")}`}return null}isValidIntegerFormat(i,e){const t={...this.options,minimumFractionDigits:0};return[this.stripCurrency(this.normalizeDigits(e.toLocaleString(this.locale,{...t,useGrouping:!0})),!1),this.stripCurrency(this.normalizeDigits(e.toLocaleString(this.locale,{...t,useGrouping:!1})),!1)].includes(i)}format(i,e={minimumFractionDigits:this.minimumFractionDigits,maximumFractionDigits:this.maximumFractionDigits}){return i!=null?i.toLocaleString(this.locale,{...this.options,...e}):""}toFraction(i){return`${this.digits[0]}${this.decimalSymbol}${this.onlyLocaleDigits(i.substring(1)).substring(0,this.maximumFractionDigits)}`}isFractionIncomplete(i){return!!this.normalizeDigits(this.stripGroupingSeparator(i)).match(new RegExp(`^${M}${D(this.decimalSymbol)}$`))}isNegative(i){return i.startsWith(this.negativePrefix)||this.minusSign===void 0&&(i.startsWith("(")||i.startsWith("-"))||this.minusSign!==void 0&&i.replace("-",this.minusSign).startsWith(this.minusSign)}insertCurrency(i,e){return`${e?this.negativePrefix:this.prefix}${i}${e?this.negativeSuffix:this.suffix}`}stripGroupingSeparator(i){return this.groupingSymbol!==void 0?i.replace(new RegExp(D(this.groupingSymbol),"g"),""):i}stripSignLiterals(i){return this.minusSign!==void 0?i.replace("-",this.minusSign).replace(this.minusSign,""):i.replace(/[-()]/g,"")}stripCurrency(i,e){return i.replace(e?this.negativePrefix:this.prefix,"").replace(e?this.negativeSuffix:this.suffix,"")}normalizeDecimalSeparator(i,e){return O.forEach(t=>{i=i.substring(0,e)+i.substring(e).replace(t,this.decimalSymbol)}),i}normalizeDigits(i){return this.digits[0]!=="0"&&this.digits.forEach((e,t)=>{i=i.replace(new RegExp(e,"g"),String(t))}),i}onlyDigits(i){return this.normalizeDigits(i).replace(/\D+/g,"")}onlyLocaleDigits(i){return i.replace(new RegExp(`[^${this.digits.join("")}]*`,"g"),"")}}class ${constructor(i){this.currencyFormat=i}}class T extends ${conformToMask(i,e=""){const t=this.currencyFormat.isNegative(i),n=h=>h===""&&t&&!(this.currencyFormat.minusSign===void 0?e===this.currencyFormat.negativePrefix+this.currencyFormat.negativeSuffix:e===this.currencyFormat.negativePrefix),d=h=>{if(n(h))return"";if(this.currencyFormat.maximumFractionDigits>0){if(this.currencyFormat.isFractionIncomplete(h))return h;if(h.startsWith(this.currencyFormat.decimalSymbol))return this.currencyFormat.toFraction(h)}return null};let a=i;a=this.currencyFormat.stripCurrency(a,t),a=this.currencyFormat.stripSignLiterals(a);const m=d(a);if(m!=null)return this.currencyFormat.insertCurrency(m,t);const[l,...f]=a.split(this.currencyFormat.decimalSymbol),r=N(this.currencyFormat.onlyDigits(l)),u=this.currencyFormat.onlyDigits(f.join("")).substring(0,this.currencyFormat.maximumFractionDigits),c=f.length>0&&u.length===0,g=r===""&&t&&(this.currencyFormat.minusSign===void 0?e===i.slice(0,-2)+this.currencyFormat.negativeSuffix:e===i.slice(0,-1));return c||g||n(r)?e:r.match(/\d+/)?{numberValue:+`${t?"-":""}${r}.${u}`,fractionDigits:u}:""}}class w extends ${conformToMask(i,e=""){if(i===""||this.currencyFormat.parse(e)===0&&this.currencyFormat.stripCurrency(e,!0).slice(0,-1)===this.currencyFormat.stripCurrency(i,!0))return"";const t=this.currencyFormat.isNegative(i),n=this.currencyFormat.stripSignLiterals(i)===""?-0:+`${t?"-":""}${N(this.currencyFormat.onlyDigits(i))}`/Math.pow(10,this.currencyFormat.maximumFractionDigits);return{numberValue:n,fractionDigits:n.toFixed(this.currencyFormat.maximumFractionDigits).slice(-this.currencyFormat.maximumFractionDigits)}}}const G={locale:void 0,currency:void 0,currencyDisplay:void 0,hideGroupingSeparatorOnFocus:!0,hideCurrencySymbolOnFocus:!0,hideNegligibleDecimalDigitsOnFocus:!0,precision:void 0,autoDecimalDigits:!1,valueRange:void 0,useGrouping:void 0,valueScaling:void 0};class k{constructor(i){this.el=i.el,this.onInput=i.onInput,this.onChange=i.onChange,this.addEventListener(),this.init(i.options)}setOptions(i){this.init(i),this.format(this.currencyFormat.format(this.validateValueRange(this.numberValue))),this.onChange(this.getValue())}getValue(){return{number:this.valueScaling&&this.numberValue!=null?this.toInteger(this.numberValue,this.valueScaling):this.numberValue,formatted:this.formattedValue}}setValue(i){const e=this.valueScaling!==void 0&&i!=null?this.toFloat(i,this.valueScaling):i;e!==this.numberValue&&(this.format(this.currencyFormat.format(this.validateValueRange(e))),this.onChange(this.getValue()))}init(i){this.options={...G,...i},this.options.autoDecimalDigits&&(this.options.hideNegligibleDecimalDigitsOnFocus=!1),this.el.getAttribute("inputmode")||this.el.setAttribute("inputmode",this.options.autoDecimalDigits?"numeric":"decimal"),this.currencyFormat=new L(this.options),this.numberMask=this.options.autoDecimalDigits?new w(this.currencyFormat):new T(this.currencyFormat);const e={[p.precision]:this.currencyFormat.maximumFractionDigits,[p.thousands]:3,[p.tenThousands]:4,[p.millions]:6,[p.billions]:9};this.valueScaling=this.options.valueScaling?e[this.options.valueScaling]:void 0,this.valueScalingFractionDigits=this.valueScaling!==void 0&&this.options.valueScaling!==p.precision?this.valueScaling+this.currencyFormat.maximumFractionDigits:this.currencyFormat.maximumFractionDigits,this.minValue=this.getMinValue(),this.maxValue=this.getMaxValue()}getMinValue(){var i,e;let t=this.toFloat(-Number.MAX_SAFE_INTEGER);return((i=this.options.valueRange)===null||i===void 0?void 0:i.min)!==void 0&&(t=Math.max((e=this.options.valueRange)===null||e===void 0?void 0:e.min,this.toFloat(-Number.MAX_SAFE_INTEGER))),t}getMaxValue(){var i,e;let t=this.toFloat(Number.MAX_SAFE_INTEGER);return((i=this.options.valueRange)===null||i===void 0?void 0:i.max)!==void 0&&(t=Math.min((e=this.options.valueRange)===null||e===void 0?void 0:e.max,this.toFloat(Number.MAX_SAFE_INTEGER))),t}toFloat(i,e){return i/Math.pow(10,e??this.valueScalingFractionDigits)}toInteger(i,e){return Number(i.toFixed(e??this.valueScalingFractionDigits).split(".").join(""))}validateValueRange(i){return i!=null?Math.min(Math.max(i,this.minValue),this.maxValue):i}format(i,e=!1){if(i!=null){this.decimalSymbolInsertedAt!==void 0&&(i=this.currencyFormat.normalizeDecimalSeparator(i,this.decimalSymbolInsertedAt),this.decimalSymbolInsertedAt=void 0);const t=this.numberMask.conformToMask(i,this.formattedValue);let n;if(typeof t=="object"){const{numberValue:d,fractionDigits:a}=t;let{maximumFractionDigits:m,minimumFractionDigits:l}=this.currencyFormat;this.focus?l=e?a.replace(/0+$/,"").length:Math.min(m,a.length):Number.isInteger(d)&&!this.options.autoDecimalDigits&&(this.options.precision===void 0||l===0)&&(l=m=0),n=this.toInteger(Math.abs(d))>Number.MAX_SAFE_INTEGER?this.formattedValue:this.currencyFormat.format(d,{useGrouping:this.options.useGrouping!==!1&&!(this.focus&&this.options.hideGroupingSeparatorOnFocus),minimumFractionDigits:l,maximumFractionDigits:m})}else n=t;this.maxValue<=0&&!this.currencyFormat.isNegative(n)&&this.currencyFormat.parse(n)!==0&&(n=n.replace(this.currencyFormat.prefix,this.currencyFormat.negativePrefix)),this.minValue>=0&&(n=n.replace(this.currencyFormat.negativePrefix,this.currencyFormat.prefix)),(this.options.currencyDisplay===y.hidden||this.focus&&this.options.hideCurrencySymbolOnFocus)&&(n=n.replace(this.currencyFormat.negativePrefix,this.currencyFormat.minusSign!==void 0?this.currencyFormat.minusSign:"(").replace(this.currencyFormat.negativeSuffix,this.currencyFormat.minusSign!==void 0?"":")").replace(this.currencyFormat.prefix,"").replace(this.currencyFormat.suffix,"")),this.el.value=n,this.numberValue=this.currencyFormat.parse(n)}else this.el.value="",this.numberValue=null;this.formattedValue=this.el.value,this.onInput(this.getValue())}addEventListener(){this.el.addEventListener("input",i=>{const{value:e,selectionStart:t}=this.el,n=i;if(t&&n.data&&O.includes(n.data)&&(this.decimalSymbolInsertedAt=t-1),this.format(e),this.focus&&t!=null){const d=()=>{const{prefix:a,suffix:m,decimalSymbol:l,maximumFractionDigits:f,groupingSymbol:r}=this.currencyFormat;let u=e.length-t;const c=this.formattedValue.length;if(this.currencyFormat.minusSign===void 0&&(e.startsWith("(")||e.startsWith("-"))&&!e.endsWith(")"))return c-this.currencyFormat.negativeSuffix.length>1?this.formattedValue.substring(t).length:1;if(this.formattedValue.substring(t,1)===r&&E(this.formattedValue,r)===E(e,r)+1)return c-u-1;if(c<u)return t;if(l!==void 0&&e.indexOf(l)!==-1){const g=e.indexOf(l)+1;if(Math.abs(c-e.length)>1&&t<=g)return this.formattedValue.indexOf(l)+1;!this.options.autoDecimalDigits&&t>g&&this.currencyFormat.onlyDigits(e.substring(g)).length-1===f&&(u-=1)}return this.options.hideCurrencySymbolOnFocus||this.options.currencyDisplay===y.hidden?c-u:Math.max(c-Math.max(u,m.length),a.length)};this.setCaretPosition(d())}}),this.el.addEventListener("focus",()=>{this.focus=!0,this.numberValueOnFocus=this.numberValue,setTimeout(()=>{const{value:i,selectionStart:e,selectionEnd:t}=this.el;if(this.format(i,this.options.hideNegligibleDecimalDigitsOnFocus),e!=null&&t!=null&&Math.abs(e-t)>0)this.setCaretPosition(0,this.el.value.length);else if(e!=null){const n=this.getCaretPositionOnFocus(i,e);this.setCaretPosition(n)}})}),this.el.addEventListener("blur",()=>{this.focus=!1,this.format(this.currencyFormat.format(this.validateValueRange(this.numberValue))),this.numberValueOnFocus!==this.numberValue&&this.onChange(this.getValue())})}getCaretPositionOnFocus(i,e){if(this.numberValue==null)return e;const{prefix:t,negativePrefix:n,suffix:d,negativeSuffix:a,groupingSymbol:m,currency:l}=this.currencyFormat,f=this.numberValue<0,r=f?n:t,u=r.length;if(this.options.hideCurrencySymbolOnFocus||this.options.currencyDisplay===y.hidden){if(f){if(e<=1)return 1;if(i.endsWith(")")&&e>i.indexOf(")"))return this.formattedValue.length-1}}else{const g=f?a.length:d.length;if(e>=i.length-g)return this.formattedValue.length-g;if(e<u)return u}let c=e;return this.options.hideCurrencySymbolOnFocus&&this.options.currencyDisplay!==y.hidden&&e>=u&&l!==void 0&&r.includes(l)&&(c-=u,f&&(c+=1)),this.options.hideGroupingSeparatorOnFocus&&m!==void 0&&(c-=E(i.substring(0,e),m)),c}setCaretPosition(i,e=i){this.el.setSelectionRange(i,e)}}const z=s=>s!=null&&s.matches("input")?s:s==null?void 0:s.querySelector("input");function X(s,i){var e,t,n,d;let a;const m=V(null),l=V(null),f=V(null),r=P(),u=(r==null?void 0:r.emit)||((t=(e=r==null?void 0:r.proxy)===null||e===void 0?void 0:e.$emit)===null||t===void 0?void 0:t.bind(r==null?void 0:r.proxy)),c=(r==null?void 0:r.props)||((n=r==null?void 0:r.proxy)===null||n===void 0?void 0:n.$props),g=A.startsWith("3"),h=g&&((d=r==null?void 0:r.attrs.modelModifiers)===null||d===void 0?void 0:d.lazy),F=R(()=>c==null?void 0:c[g?"modelValue":"value"]),S=g?"update:modelValue":"input",x=h?"update:modelValue":"change";return _(m,o=>{var v;if(o){const I=z((v=o==null?void 0:o.$el)!==null&&v!==void 0?v:o);I?(a=new k({el:I,options:s,onInput:b=>{!h&&i!==!1&&F.value!==b.number&&(u==null||u(S,b.number)),f.value=b.number,l.value=b.formatted},onChange:b=>{i!==!1&&(u==null||u(x,b.number))}}),a.setValue(F.value)):console.error('No input element found. Please make sure that the "inputRef" template ref is properly assigned.')}else a=null}),{inputRef:m,numberValue:f,formattedValue:l,setValue:o=>a==null?void 0:a.setValue(o),setOptions:o=>a==null?void 0:a.setOptions(o)}}export{X as u};
